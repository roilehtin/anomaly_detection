readme_content = '''# Алгоритм выявления предотказных состояний RSU

## Описание

Данный проект реализует алгоритм обнаружения предотказных состояний для распределённых вычислительных устройств (RSU) на основе анализа метрик и динамических статистических порогов. Аномалии определяются по отклонениям текущих значений метрик от исторических, с учетом временных и пространственных особенностей.

## Основные возможности

- **Динамические пороги:** Используются адаптивные пороги для метрик (CPU, latency, downtime) на основе исторических данных, сегментированных по времени суток, дню недели, сезону и праздничным дням.
- **Сегментация по времени:** Для каждого часа, дня недели, сезона и праздника строятся отдельные статистические модели.
- **Пространственная фильтрация:** Аномалия считается значимой только при совпадении с аномалиями у соседних RSU.
- **Гибкая настройка:** Параметры порога, радиуса поиска соседей и числа метрик для фиксации аномалии настраиваются.

## Логика работы

1. **Построение статистических порогов**
   - Для каждого временного сегмента вычисляются перцентили (например, 99-й) по историческим данным для заданных метрик.

2. **Детектирование аномалий**
   - Аномалия фиксируется, если хотя бы две из метрик превышают соответствующий порог для текущего временного сегмента.

3. **Пространственная фильтрация**
   - Аномалия подтверждается только если она совпадает с ≥2 соседними RSU в радиусе (по умолчанию 400 метров).

## Структура кода

- `get_russian_holiday(ts)`: определяет праздничный день по дате.
- `get_season(ts)`: определяет сезон по дате.
- `build_segment_percentiles_with_season(df_hist, metrics, percentile)`: строит таблицу порогов для каждой комбинации временных признаков.
- `detect_anomalies_by_time_segment(...)`: определяет аномалии по текущим данным и временным сегментам.
- `filter_spatial_anomalies(...)`: фильтрует аномалии по пространственному признаку (наличие соседей).
- `detect_anomalies_for_latest_timestamp(...)`: основной интерфейс — выявляет аномалии для последнего временного среза.

## Использование

### Требования

- Python 3.8+
- pandas
- geopy
